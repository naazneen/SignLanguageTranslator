{% load static %}

<link rel="stylesheet" type="text/css" href="{% static "app/style.css" %}">
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<title>Sign-language</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

	<link rel="stylesheet" type="text/css" href="css/style.css" />
	<script type="text/javascript" src="https://unpkg.com/webcam-easy/dist/webcam-easy.min.js"></script>
 
</head>
<body>
	<div id="page">
		<div id="header">
			<div>
				<a href="index.html"><img src="images/logo-custom.png" style="margin-left:-150px" alt="Logo" /></a>
			</div>
		
		</div>
		<div id="body">
			<div class="col-sm-9">
				<img id="img" src="images/allow_camera.png" width="700" height="400" hidden />
				<video id="webcam" autoplay playsinline width="640" height="480"></video>
				<canvas id="canvas" class="d-none"></canvas>
				
				<audio id="snapSound" src="audio/snap.wav" preload = "auto"></audio>
			</div>
			<div class="col-sm-3">
				<h2><br><br><br><br>
					Sign Up and Train our Model
				</h2>
			</div>
		</div>
		
	</div>
</body>
<script>
	const webcamElement = document.getElementById('webcam');
	const canvasElement = document.getElementById('canvas');
	const snapSoundElement = document.getElementById('snapSound');
	const webcam = new Webcam(webcamElement, 'user', canvasElement, snapSoundElement);
	var img = document.getElementById('img'); 
	var cam_on = false;
	if (!cam_on){
		console.log("me")
		canvasElement.setAttribute('hidden','true');
		img.removeAttribute('hidden');
		}

	webcam.start()
   .then(result =>{
      console.log("webcam started");
	  img.setAttribute('hidden','true');
		canvasElement.removeAttribute('hidden');
	  cam_on = true;
   })
   .catch(err => {
       console.log(err);
	   console.log("error occures:", err)
   });

//    let picture = webcam.snap();
	// document.querySelector('#download-photo').href = picture;
</script>
</html>